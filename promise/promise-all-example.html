<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Promise + fetch</title>
  <link rel="stylesheet" href="index.css">
</head>
<body style="background-color: #2b2b2b; color: #fff">
<h1>Promise + fetch</h1>

<ol id="data-container">
  <span id="loader" hidden>Loading...</span>
</ol>

<script>
  /*
    Promise.all([
      new Promise(),
      new Promise(),
      new Promise(),
    ])
    */
  const TODOS_URL = 'https://jsonplaceholder.typicode.com/todos'
  const todosIds = [43, 10, 5, 100, 101]
  const dataContainer = document.querySelector('#data-container')

  const createTodoElement = (text) => {
    const li = document.createElement('li')
    const a = document.createElement('a')
    a.href = '#'
    a.textContent = text
    li.append(a)

    return li
  }

  const getTodosById = (ids) => {
    const requests = ids.map(id => fetch(`${TODOS_URL}/${id}`))
    Promise.all(requests)
      .then(responses => {
        const dataResults = responses.map(result => result.json())
        return Promise.all(dataResults)
      })
    .then(todos => {
      console.log('todos', todos)
      todos.forEach(todo => {
        dataContainer.append(createTodoElement(todo.title))
      })
      //dataContainer
    })
    .catch(error => {
      console.log(error)
    })
  }

  getTodosById(todosIds)

</script>
</body>
</html>
