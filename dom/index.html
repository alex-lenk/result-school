<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="index.css">
  <title>Работа с DOM часть 2</title>
</head>
<body>
<div id="tasks">
  <div class="tasks__wrapper">
    <form class="create-task-block">
      <input
        name="taskName"
        class="create-task-block__input default-text-input"
        type="text"
        placeholder="Создайте новую задачу"
        value="Посмотреть урок по JavaScript"
      >
      <button
        type="submit"
        class="create-task-block__button default-button"
      >
        Создать
      </button>
    </form>

    <div class="tasks-list"></div>
  </div>
</div>

<script>
  // Задание #2 / 14. Работа с DOM. Часть 1 / Модуль 1. База JavaScript

  const tasks = [
    {
      id: '1138465078061',
      completed: false,
      text: 'Посмотреть новый урок по JavaScript',
    },
    {
      id: '1138465078062',
      completed: false,
      text: 'Выполнить тест после урока',
    },
    {
      id: '1138465078063',
      completed: false,
      text: 'Выполнить ДЗ после урока',
    },
  ]

  function createdEl(typeEl, classEl, attr) {
    const htmlTag = document.createElement(typeEl)

    if (classEl) {
      if (!Array.isArray(classEl)) {
        htmlTag.classList.add(classEl)
      } else {
        htmlTag.classList.add(...classEl)
      }
    }
    if (attr) {
      htmlTag.setAttribute(attr.type, attr.value)
    }
    return htmlTag
  }

  const tasksList = document.querySelector('.tasks-list')

  tasks.forEach(instance => {
    const id = instance.id

    const taskItem = createdEl('div', 'task-item', {type: 'data-task-id', value: id})
    const container = createdEl('div', 'task-item__main-container')
    const content = createdEl('div', 'task-item__main-content')
    const form = createdEl('form', 'checkbox-form')
    const input = createdEl('input', 'checkbox-form__checkbox', {type: 'type', value: 'checkbox'})
    input.setAttribute('id', `task-${id}`)
    const label = createdEl('label', '', {type: 'for', value: `task-${id}`})
    const span = createdEl('span', 'task-item__text')
    span.textContent = instance.text

    const button = createdEl('button', ['task-item__delete-button', 'default-button', 'delete-button'], {type: 'data-delete-task-id', value: id})
    button.textContent = 'Удалить'

    taskItem.append(container)
    container.append(content)
    container.append(button)
    content.append(form)
    content.append(span)
    form.append(input)
    form.append(label)

    tasksList.append(taskItem)
  })
</script>
</body>
</html>
